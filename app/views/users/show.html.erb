<div class="container-fluid bg-light">
  <div class="row pt-3">
    <div class="col-sm-12">
        <div class="row">
        <div class="col-sm-3 mt-3">
          <%= link_to user_path(@user), class: "nav-link" do %>
            <%= image_tag @user.avatar, width: "100%", class: "img-responsive center-block" if @user.avatar?%>
            <%= image_tag "http://via.placeholder.com/150x130", width: "100%", class: "img-responsive center-block img-rounded"  unless @user.avatar?%> 
            <p class="text-center"><strong><%= @user.name %></strong></p>
          <% end %>
        </div>
        <div class="col-sm-9 comment">
          <p><%= @user.description %></p>
          <% if show_edit("User", @user) %>
            <div class="d-flex offset-sm-10">
              <%= link_to "Edit", edit_user_path(@user), class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <table class="table table-hover text-center bg-light">
      <tbody>
        <% @posts.each do |post| %>
          <tr data-link="<%= post_path(post) %> ">
            <td data-link="<%= post_path(post) %>"><%= post.title %></td>
            <td data-link="<%= post_path(post) %>">Published</td>
            <td data-link="<%= post_path(post) %>"><%= post.updated_at.strftime("%Y-%m-%d") %></td>
            <% if show_edit("User", @user) %>
              <td>
                <%= link_to 'U', edit_post_path(post), :class => "btn btn-primary m-1"  %>
                <%= link_to 'X', post_path(post), method: :delete, data: { confirm: "Are you sure?"}, :class => "btn btn-danger m-1" %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
    <% if show_edit("User", @user) %>
      <%= link_to "New Post", new_post_path, class: "btn btn-primary" %>
    <% end %>
  </div>
</div>
<script>
  $("tr[data-link]").click(function() {
    window.location = $(this).data("link")
  })
</script>